{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '34730863-c268bffb7a5a82490d4aafc58';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport default async function getImagesByQuery(query, page) {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryListEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader-wrapper');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst createGallery = images => {\n  const galleryItemsMarkup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n          <a href=${image.largeImageURL} class=\"gallery-link\">\n            <img\n              class=\"gallery-img\"\n              src=${image.webformatURL}\n              alt=\"${image.tags}\"\n              loading=\"lazy\"\n            />\n          </a>  \n          <div class=\"img-descr-wrapper\">\n            <p class=\"img-descr\">\n              <span class=\"descr-title\">Likes</span>\n              <span class=\"descr-text\">${image.likes}</span>\n            </p>\n            <p class=\"img-descr\">\n              <span class=\"descr-title\">Views</span>\n              <span class=\"descr-text\">${image.views}</span>\n            </p>\n            <p class=\"img-descr\">\n              <span class=\"descr-title\">Comments</span>\n              <span class=\"descr-text\">${image.comments}</span>\n            </p>\n            <p class=\"img-descr\">\n              <span class=\"descr-title\">Downloads</span>\n              <span class=\"descr-text\">${image.downloads}</span>\n            </p>\n          </div>\n        </li>`\n    )\n    .join('');\n  galleryListEl.insertAdjacentHTML('beforeend', galleryItemsMarkup);\n\n  lightbox.refresh();\n};\n\nconst clearGallery = () => {\n  galleryListEl.innerHTML = '';\n};\nconst showLoader = () => {\n  loaderEl.classList.add('is-visible');\n};\nconst hideLoader = () => {\n  loaderEl.classList.remove('is-visible');\n};\n\nconst showLoadMoreButton = () => {\n  loadMoreBtnEl.classList.add('is-visible');\n};\nconst hideLoadMoreButton = () => {\n  loadMoreBtnEl.classList.remove('is-visible');\n};\n\nexport default {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api';\nimport renderFunctions from './js/render-functions';\n\nlet currentInpuValue = '';\nlet currentPage = 0;\nlet curentTotalHits = 0;\n\nconst formEl = document.querySelector('.form');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn');\n\nformEl.addEventListener('submit', handleImageSearch);\nloadMoreBtnEl.addEventListener('click', handlePagination);\n\nasync function handleImageSearch(e) {\n  e.preventDefault();\n  renderFunctions.hideLoadMoreButton();\n  currentPage = 1;\n\n  const inputValue = e.target.searchText.value.trim();\n\n  if (inputValue === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please enter your request in the search field!',\n      messageColor: 'black',\n      messageSize: '16',\n      backgroundColor: 'yellow',\n      closeOnClick: true,\n    });\n    return;\n  }\n\n  renderFunctions.clearGallery();\n  renderFunctions.showLoader();\n\n  currentInpuValue = inputValue;\n\n  try {\n    const data = await getImagesByQuery(inputValue);\n\n    curentTotalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching<br>your search query. Please try again!',\n        messageColor: '#ffffff',\n        messageSize: '16',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n        closeOnClick: true,\n      });\n      renderFunctions.hideLoader();\n      return;\n    }\n\n    renderFunctions.createGallery(data.hits);\n    renderFunctions.hideLoader();\n    curentTotalHits -= data.hits.length;\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Sorry, something went wrong...Try later',\n      messageColor: 'black',\n      messageSize: '18',\n      backgroundColor: 'yellow',\n      closeOnClick: true,\n    });\n    renderFunctions.hideLoader();\n  }\n\n  if (curentTotalHits > 1) {\n    renderFunctions.showLoadMoreButton();\n  }\n\n  formEl.reset();\n}\n\nasync function handlePagination() {\n  renderFunctions.showLoader();\n  currentPage += 1;\n\n  const data = await getImagesByQuery(currentInpuValue, currentPage);\n\n  try {\n    renderFunctions.createGallery(data.hits);\n    renderFunctions.hideLoader();\n    curentTotalHits -= data.hits.length;\n\n    const cardEl = document.querySelector('.gallery-item');\n    const cardHeight = cardEl.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    renderFunctions.hideLoader();\n    iziToast.error({\n      position: 'topRight',\n      message: 'Sorry, something went wrong...Try later',\n      messageColor: 'black',\n      messageSize: '18',\n      backgroundColor: 'yellow',\n      closeOnClick: true,\n    });\n  }\n\n  if (curentTotalHits < 1) {\n    renderFunctions.hideLoadMoreButton();\n    iziToast.info({\n      position: 'bottomRight',\n      timeout: 7000,\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: 'black',\n      messageSize: '18',\n      backgroundColor: 'yellow',\n      closeOnClick: true,\n    });\n    return;\n  }\n}\n"],"names":["API_KEY","axios","getImagesByQuery","query","page","galleryListEl","loaderEl","loadMoreBtnEl","lightbox","SimpleLightbox","createGallery","images","galleryItemsMarkup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","renderFunctions","currentInpuValue","currentPage","curentTotalHits","formEl","handleImageSearch","handlePagination","e","inputValue","iziToast","data","cardHeight"],"mappings":"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"}